<!DOCTYPE html>
<html>
	<head>
	<!-- A linha abaixo ativa os caracteres especiais -->
		<meta charset="UTF-8">
		<title>Jogo da Velha</title>

    <!-- Aqui usei a tag 'style' para trabalhar com o CSS-->
    
		<style>

    /* Defini√ß√£o dos atributos para o corpo do c√≥digo HTML */
      
    body{
      background-color: #313338;
        color: white;
        display: flex;
        flex-direction: row;
        align-items: center;
        gap: 10px;
    }
      
	/* Essa classe cria um quadrado */
	.quadrado {
		width: 150px;
		height: 150px;
		border: 2px solid black;
		float: left;
		text-align: center;
        font-size: 105px;
		}

	/* Essa classe deixa os quadrados na mesma linha */
	.coluna {
		clear: both;
		}

    
      
		</style>
    
	</head>
	<body>
    <div>
		<div class="coluna">
			<div class="quadrado" id="quadrado0"></div>
			<div class="quadrado" id="quadrado1"></div>
			<div class="quadrado" id="quadrado2"></div>
		</div>
		<div class="coluna">
			<div class="quadrado" id="quadrado3"></div>
			<div class="quadrado" id="quadrado4"></div>
			<div class="quadrado" id="quadrado5"></div>
		</div>
		<div class="coluna">
			<div class="quadrado" id="quadrado6"></div>
			<div class="quadrado" id="quadrado7"></div>
			<div class="quadrado" id="quadrado8"></div>
		</div>
    </div>
    <br>
    <br>

    <div>
    <button onclick="startGame()">Jogue Novamente</button>
    
    <br>
    <br>
    
    <div id = "Mensagem"></div>
    </div> 
    
   <!-- Aqui abri a tag 'script' para trabalhar com o javascript -->
    
		<script>

		// Tabuleiro representado por uma matriz
		var board = [];

		// Vari√°vel dos turnos
		var userTurn = true;

        var compTurn = false;
      
		// Essa fun√ß√£o vai atualizar o tabuleiro no HTML
		function updateBoard() {
			for (var i = 0; i < board.length; i++) {
				document.getElementById("quadrado" + (i)).innerText = board[i];
			}
		}
		
		// Essa fun√ß√£o vai procurar pelos espa√ßos vazio do tabuleiro
		function vazio() {
      
			var vazios = [];

            for(var i = 0; i < board.length; i++){

            if(board[i].length == 0){
            vazios.push(i);
            }
        
        }

      return vazios;
		}
		
	  // Fun√ß√£o referente ao turno do computador
	  function computerTurn() {
      
      var jogada = 0;
      var v = vazio();
      
      jogada = v[Math.floor(Math.random() * v.length)];
  
      if(v.length > 0 && document.getElementById("Mensagem").innerText.length == 0){

      board[jogada] = "ê§è";
        
      updateBoard();
        
      }

      vitoria("ê§è", v);

      
	  // Turno do usu√°rio
	  userTurn = true;
      compTurn = false;
      
     
	}

    //essa fun√ß√£o vai verificar se h√° uma vit√≥ria
      
    function vitoria(jogador, vazio){

      // verifica√ß√µes de vit√≥ria horizontais 
      
      if((board[0] == jogador && board[1] == jogador && board[2] 
      == jogador) || (board[3] == jogador && board[4] == jogador
      && board[5] == jogador) || (board[6] == jogador &&
	  board[7] == jogador && board[8] == jogador)){
       
      fimdejogo(jogador);
       
      }
       
      // verifica√ß√µes de vit√≥ria diagonais 
      else if((board[0] == jogador && board[3] == jogador &&
      board[6] == jogador) || (board[1] == jogador && board[4] 
      == jogador && board[7] == jogador) || (board[2] == jogador
      && board[5] == jogador && board[8] == jogador)){

      fimdejogo(jogador);
          
      }

      // verifica√ß√µes de vit√≥ria verticais 
          
      else if((board[0] == jogador && board[4] == jogador && board[8] == jogador) 
      || (board[2] == jogador && board[4] == jogador && board[6] == jogador)){

      fimdejogo(jogador);
      }
      
      // verifica√ß√£o de velha

      if(vazio.length == 0 && document.getElementById("Mensagem").innerText.length == 0){

      document.getElementById("Mensagem").innerText = "Fim de Jogo - Deu Velha!";

      }

    }

    // Loga a mensagem de vit√≥ria ou derrota 
      
    function fimdejogo(j){
      
       if(j == "‚úï"){
         document.getElementById("Mensagem").innerText = "Fim de Jogo - Vit√≥ria";
     }

        else{
          document.getElementById("Mensagem").innerText = "Fim de Jogo - Derrota";
        } 
    }

    // fun√ß√£o de turno do usu√°rio
      
	function click(i){
      
        v = vazio();

		// Pega o valor do quadrado
		var square = board[i];

		// Verifica se o quadrado est√° vazio e se o turno √© do usu√°rio
		if (square.length == 0 && userTurn && document.getElementById("Mensagem").innerText.length == 0) {
        
		// Atualiza o tabuleiro
		board[i] = "‚úï";
        vitoria("‚úï", v);
		updateBoard();
        
		// Turno do computador
		userTurn = false;
        compTurn = true;
		computerTurn();
        
			}
		}

		// Fun√ß√£o que inicia o jogo
      
		function startGame() {
      
		// Limpa o tabuleiro no JS e no HTML
      
		board = ["", "", "", "", "", "", "", "", ""];
        updateBoard();

        //limpa a mensagem de vit√≥ria ou derrota
      
        document.getElementById("Mensagem").innerText = "";
		}

		// Registra os eventos do jogo
		document.getElementById("quadrado0").onclick = function () { click(0) }
		document.getElementById("quadrado1").onclick = function () { click(1) }
		document.getElementById("quadrado2").onclick = function () { click(2) }
		document.getElementById("quadrado3").onclick = function () { click(3) }
		document.getElementById("quadrado4").onclick = function () { click(4) }
		document.getElementById("quadrado5").onclick = function () { click(5) }
		document.getElementById("quadrado6").onclick = function () { click(6) }
		document.getElementById("quadrado7").onclick = function () { click(7) }
		document.getElementById("quadrado8").onclick = function () { click(8) }

		// Inicia o jogo
		startGame();
      
		</script>
    
	</body>
</html>
